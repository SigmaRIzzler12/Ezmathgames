<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Now Playing...</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="bg-gray-900 flex flex-col h-screen">

    <header class="bg-gray-800 text-white p-3 flex items-center justify-between shadow-lg flex-shrink-0 z-10">
        <h1 id="game-title" class="text-lg font-bold ml-4">Loading Game...</h1>
        <div class="flex items-center space-x-3">
            <button id="fullscreen-btn" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-fullscreen" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z"/>
                </svg>
            </button>
            <a href="index.html" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                &larr; Back to Home
            </a>
        </div>
    </header>

    <main class="flex-grow w-full h-full bg-black">
        <iframe id="game-frame" class="w-full h-full border-0" allowfullscreen></iframe>
    </main>

    <script>
        const gameFrame = document.getElementById('game-frame');
        const gameTitle = document.getElementById('game-title');
        const fullscreenBtn = document.getElementById('fullscreen-btn');

        // Function to capitalize first letter of a string and replace dashes
        function formatGameName(name) {
            return name
                .split('-')
                .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                .join(' ');
        }

        window.onload = () => {
            const urlParams = new URLSearchParams(window.location.search);
            const gameId = urlParams.get('game');

            if (gameId) {
                const gamePath = `./games/${gameId}/index.html`;
                gameFrame.src = gamePath;
                gameTitle.textContent = `Now Playing: ${formatGameName(gameId)}`;
            } else {
                gameFrame.style.display = 'none';
                gameTitle.textContent = 'No Game Selected';
            }
        };
        
        // Fullscreen functionality
        fullscreenBtn.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                gameFrame.requestFullscreen().catch(err => {
                    alert(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
                });
            } else {
                document.exitFullscreen();
            }
        });
    </script>
</body>
</html>
